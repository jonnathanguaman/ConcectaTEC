<div class="crud-container">
    <h2>Gesti√≥n de Lugares</h2>
    <form (submit)="onSubmit()" #formLugar="ngForm">
        <div class="input-container">
            <label for="id_lugar">ID Lugar:</label>
            <input
                type="number"
                id="id_lugar"
                [(ngModel)]="lugar.id_lugar"
                name="id_lugar"
                required
                #id_lugar="ngModel"
            />
            <div *ngIf="id_lugar.invalid && id_lugar.touched" class="message error">
                El ID es obligatorio.
            </div>
        </div>
        <div class="input-container">
            <label for="nombre">Nombre:</label>
            <input
                type="text"
                id="nombre"
                [(ngModel)]="lugar.nombre"
                name="nombre"
                required
                minlength="3"
                #nombre="ngModel"
            />
            <div *ngIf="nombre.invalid && nombre.touched" class="message error">
                El nombre es obligatorio y debe tener al menos 3 caracteres.
            </div>
        </div>
        <div class="input-container">
            <label for="descripcion">Descripci√≥n:</label>
            <textarea
                id="descripcion"
                [(ngModel)]="lugar.descripcion"
                name="descripcion"
                rows="4"
                required
                #descripcion="ngModel"
            ></textarea>
            <div *ngIf="descripcion.invalid && descripcion.touched" class="message error">
                La descripci√≥n es obligatoria.
            </div>
        </div>
        <div class="input-container">
            <label for="direccion">Direcci√≥n:</label>
            <input
                type="text"
                id="direccion"
                [(ngModel)]="lugar.direccion"
                name="direccion"
                required
                #direccion="ngModel"
            />
            <div *ngIf="direccion.invalid && direccion.touched" class="message error">
                La direcci√≥n es obligatoria.
            </div>
        </div>
        <div class="input-container">
            <label for="imagen">Imagen:</label>
            <input type="file" id="imagen" (change)="onImageChange($event)" />
        </div>
        <div class="checkbox-group">
            <label>
                <input type="checkbox" [(ngModel)]="lugar.areaProtegida" name="areaProtegida" />
                √Årea Protegida
            </label>
            <label>
                <input type="checkbox" [(ngModel)]="lugar.patrimonio" name="patrimonio" />
                Patrimonio
            </label>
            <label>
                <input type="checkbox" [(ngModel)]="lugar.rural" name="rural" />
                Rural
            </label>
            <label>
                <input type="checkbox" [(ngModel)]="lugar.urbano" name="urbano" />
                Urbano
            </label>
        </div>
        <div class="btn-container">
            <button class="btn-opcion" type="submit" [disabled]="formLugar.invalid">
                <span class="icon">‚úîÔ∏è</span> Guardar
            </button>
            <button class="btn-opcion" type="button" (click)="limpiarFormulario()">
                <span class="icon">üßπ</span> Limpiar
            </button>
        </div>
    </form>

    <div *ngIf="message" class="message success">{{ message }}</div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Descripci√≥n</th>
                    <th>Direcci√≥n</th>
                    <th>√Årea Protegida</th>
                    <th>Patrimonio</th>
                    <th>Rural</th>
                    <th>Urbano</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lugar of lugares">
                    <td>{{ lugar.id_lugar }}</td>
                    <td>{{ lugar.nombre }}</td>
                    <td>{{ lugar.descripcion }}</td>
                    <td>{{ lugar.direccion }}</td>
                    <td>{{ lugar.areaProtegida ? 'S√≠' : 'No' }}</td>
                    <td>{{ lugar.patrimonio ? 'S√≠' : 'No' }}</td>
                    <td>{{ lugar.rural ? 'S√≠' : 'No' }}</td>
                    <td>{{ lugar.urbano ? 'S√≠' : 'No' }}</td>
                    <td><img [src]="lugar.imagen" alt="Imagen Lugar" /></td>
                    <td>
                        <button class="btn-opcion" (click)="editarLugar(lugar)">
                            <span class="icon">‚úèÔ∏è</span> Editar
                        </button>
                        <button class="btn-opcion" (click)="eliminarLugar(lugar.id_lugar)">
                            <span class="icon">‚ùå</span> Eliminar
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
