<div class="crud-container">
    <h2>Gesti√≥n de Restaurantes</h2>
    <form (submit)="onSubmit()" #formRestaurante="ngForm">
        <div class="input-container">
            <label for="id_restaurante">ID Restaurante:</label>
            <input
                type="number"
                id="id_restaurante"
                [(ngModel)]="restaurante.id_restaurante"
                name="id_restaurante"
                required
                #id_restaurante="ngModel"
            />
            <div *ngIf="id_restaurante.invalid && id_restaurante.touched" class="message error">
                El ID es obligatorio.
            </div>
        </div>
        <div class="input-container">
            <label for="nombre">Nombre:</label>
            <input
                type="text"
                id="nombre"
                [(ngModel)]="restaurante.nombre"
                name="nombre"
                required
                minlength="3"
                #nombre="ngModel"
            />
            <div *ngIf="nombre.invalid && nombre.touched" class="message error">
                El nombre es obligatorio y debe tener al menos 3 caracteres.
            </div>
        </div>
        <div class="input-container">
            <label for="direccion">Direcci√≥n:</label>
            <input
                type="text"
                id="direccion"
                [(ngModel)]="restaurante.direccion"
                name="direccion"
                required
                #direccion="ngModel"
            />
            <div *ngIf="direccion.invalid && direccion.touched" class="message error">
                La direcci√≥n es obligatoria.
            </div>
        </div>
        <div class="input-container">
            <label for="telefono">Tel√©fono:</label>
            <input
                type="tel"
                id="telefono"
                [(ngModel)]="restaurante.telefono"
                name="telefono"
                required
                pattern="^[0-9]{10}$"
                #telefono="ngModel"
            />
            <div *ngIf="telefono.invalid && telefono.touched" class="message error">
                El tel√©fono debe ser v√°lido (10 d√≠gitos).
            </div>
        </div>
        <div class="input-container">
            <label for="descripcion">Descripci√≥n:</label>
            <textarea
                id="descripcion"
                [(ngModel)]="restaurante.descripcion"
                name="descripcion"
                rows="4"
                required
                #descripcion="ngModel"
            ></textarea>
            <div *ngIf="descripcion.invalid && descripcion.touched" class="message error">
                La descripci√≥n es obligatoria.
            </div>
        </div>
        <div class="input-container">
            <label for="disponibilidad">Disponibilidad:</label>
            <input
                type="number"
                id="disponibilidad"
                [(ngModel)]="restaurante.disponibilidad"
                name="disponibilidad"
                required
                min="0"
                #disponibilidad="ngModel"
            />
            <div *ngIf="disponibilidad.invalid && disponibilidad.touched" class="message error">
                La disponibilidad debe ser un n√∫mero entero mayor o igual a 0.
            </div>
        </div>
        <div class="input-container">
            <label for="imagen">Imagen:</label>
            <input type="file" id="imagen" (change)="onImageChange($event)" />
        </div>
        <div class="btn-container">
            <button class="btn-opcion" type="submit" [disabled]="formRestaurante.invalid">
                <span class="icon">‚úîÔ∏è</span> Guardar
            </button>
            <button class="btn-opcion" type="button" (click)="limpiarFormulario()">
                <span class="icon">üßπ</span> Limpiar
            </button>
        </div>
    </form>

    <div *ngIf="message" class="message success">{{ message }}</div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Direcci√≥n</th>
                    <th>Tel√©fono</th>
                    <th>Descripci√≥n</th>
                    <th>Disponibilidad</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let restaurante of restaurantes">
                    <td>{{ restaurante.id_restaurante }}</td>
                    <td>{{ restaurante.nombre }}</td>
                    <td>{{ restaurante.direccion }}</td>
                    <td>{{ restaurante.telefono }}</td>
                    <td>{{ restaurante.descripcion }}</td>
                    <td>{{ restaurante.disponibilidad }}</td>
                    <td><img [src]="restaurante.imagen" alt="Imagen Restaurante" /></td>
                    <td>
                        <button class="btn-opcion" (click)="editarRestaurante(restaurante)">
                            <span class="icon">‚úèÔ∏è</span> Editar
                        </button>
                        <button class="btn-opcion" (click)="eliminarRestaurante(restaurante.id_restaurante)">
                            <span class="icon">‚ùå</span> Eliminar
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
